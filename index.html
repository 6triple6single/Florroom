<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<title>Play Florroom!</title>
	<link rel="icon" href="data:image/svg+xml,
		<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
			<path d='M0 0L100 0L100 100L0 100Z' style='stroke: none; fill: %23ffff7f'/>
			<path d='M18 66A40 40 0 0 0 82 66M30 18L30 50M70 18L70 50' style='stroke: %23000000; stroke-width: 5px; fill: none'/>
		</svg>
	">
	<style>
		body {
			touch-action: manipulation;
			user-select: none;
			overflow: hidden;
		}
		input {
			width: 30px;
		}
		g,path {
			transform-origin: center;
		}
		#version1 {
			position: absolute;
			top: 0px;
			left: 0px;
			background-color: #bf7fbf;
			height: 100%;
			width: 100%;
			pointer-events: none;
			z-index: 7000;
		}
		#version2 {
			display: flex;
			flex-direction: column;
			position: absolute;
			top: 50%;
			left: 50%;
			background-color: #7fbf7f;
			width: 50%;
			transform: translate(-50%,-50%);
			border: 2px solid;
			padding-bottom: 50px;
			overflow-x: hidden;
			overflow-y: auto;
			align-items: center;
			z-index: 7744;
		}
		#version3 {
			border: 1.5px solid;
			outline: none;
			background-color: #7f9fbf;
			height: 30px;
			width: 200px;
		}
		#version4 {
			border: 1.5px solid;
			outline: none;
			background-color: #bf9f7f;
			height: 30px;
			width: 200px;
		}
		#end1 {
			position: absolute;
			top: 0px;
			left: 0px;
			background-color: #000000;
			height: 100%;
			width: 100%;
			opacity: 1;
			pointer-events: none;
			z-index: 7976;
		}
		#end2 {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%,-50%);
			font-size: 32px;
			color: #ffffff;
			opacity: 0;
			pointer-events: none;
			z-index: 7979;
		}
		.tl {
			position: absolute;
			top: 20px;
			left: 20px;
		}
		.tr {
			position: absolute;
			top: 20px;
			right: 20px;
		}
		.bl {
			position: absolute;
			bottom: 20px;
			left: 20px;
		}
		.br {
			position: absolute;
			bottom: 20px;
			right: 20px;
		}
		.mid {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%,-50%) var(--transform2,translate(0px,0px));
		}
		.bottom {
			position: absolute;
			top: 50%;
			left: 100%;
			transform: translate(-50%,-50px);
		}
		.lcmargin {
			margin-top: 5px;
			margin-bottom: 5px;
		}
		.cmargin {
			margin-top: 20px;
			margin-bottom: 20px;
		}
		.hcmargin {
			margin-top: 50px;
			margin-bottom: 50px;
		}
		.llmargin {
			margin-left: 5px;
			margin-right: 5px;
		}
		.lmargin {
			margin-left: 20px;
			margin-right: 20px;
		}
		.hlmargin {
			margin-left: 50px;
			margin-right: 50px;
		}
		.diag {
			transform: rotate(45deg);
		}
		.rot72 {
			transform: rotate(72deg);
		}
		.rot144 {
			transform: rotate(144deg);
		}
		.rot216 {
			transform: rotate(216deg);
		}
		.rot288 {
			transform: rotate(288deg);
		}
		.nowrap {
			white-space: nowrap;
		}
		.text1 {
			font-size: 32px;
		}
		.text1-c {
			display: flex;
			font-size: 32px;
			justify-content: center;
			align-items: center;
		}
		.text2 {
			font-size: 24px;
		}
		.text2-c {
			display: flex;
			font-size: 24px;
			justify-content: center;
			align-items: center;
		}
		.text3 {
			font-size: 16px;
		}
		.text3-c {
			display: flex;
			font-size: 16px;
			justify-content: center;
			align-items: center;
		}
		.sqrbtn {
			background: none;
			border: none;
			outline: none;
			height: 50px;
			width: 50px;
			padding: 0px;
		}
		.sqrbtn:hover {
			background: #dfffdf;
		}
		.recbtn {
			border: 1.5px solid;
			outline: none;
			height: 30px;
			min-width: 50px;
			padding: 5px;
			white-space: nowrap;
		}
		.circbtn {
			background: none;
			border: none;
			outline: none;
			height: 50px;
			width: 50px;
			border-radius: 50%;
			padding: 0px;
			overflow: hidden;
		}
		.circbtn:hover {
			background: #dfffdf;
		}
		.dice {
			background: none;
			border: none;
			outline: none;
			height: 60px;
			width: 60px;
			padding: 0px;
		}
		.grid {
			background: none;
			position: relative;
			border: 2px solid;
			outline: none;
			height: 60px;
			width: 60px;
			padding: 0px;
		}
		.bgrid {
			background: none;
			position: relative;
			border: none;
			border-radius: 10%;
			outline: none;
			height: 80px;
			width: 80px;
			padding: 0px;
		}
		.pointer {
			cursor: pointer;
		}
		.drag {
			cursor: grab;
		}
		.drag:active {
			cursor: grabbing;
		}
		.forbidden {
			cursor: not-allowed;
		}
		.in-svg {
			stroke: #000000;
			stroke-width: 5px;
			height: 100%;
			width: 100%;
			fill: none;
		}
		.black {
			color: #000000;
		}
		.black-bg {
			background-color: #000000;
		}
		.fblack-path {
			stroke-width: 1px;
			fill: #000000;
		}
		.black-path {
			stroke: #000000;
		}
		.dgrey {
			color: #3f3f3f;
		}
		.dgrey-bg {
			background-color: #3f3f3f;
		}
		.fdgrey-path {
			stroke-width: 1px;
			fill: #3f3f3f;
		}
		.dgrey-path {
			stroke: #3f3f3f;
		}
		.grey {
			color: #7f7f7f;
		}
		.grey-bg {
			background-color: #7f7f7f;
		}
		.fgrey-path {
			stroke-width: 1px;
			fill: #7f7f7f;
		}
		.grey-path {
			stroke: #7f7f7f;
		}
		.lgrey {
			color: #bfbfbf;
		}
		.lgrey-bg {
			background-color: #bfbfbf;
		}
		.flgrey-path {
			stroke-width: 1px;
			fill: #bfbfbf;
		}
		.lgrey-path {
			stroke: #bfbfbf;
		}
		.white {
			color: #ffffff;
		}
		.white-bg {
			background-color: #ffffff;
		}
		.fwhite-path {
			stroke-width: 1px;
			fill: #ffffff;
		}
		.white-path {
			stroke: #ffffff;
		}
		.red {
			color: #ff7f7f;
		}
		.red-bg {
			background-color: #ff7f7f;
		}
		.fred-path {
			stroke-width: 1px;
			fill: #ff7f7f;
		}
		.red-path {
			stroke: #ff7f7f;
		}
		.lred {
			color: #ffbfbf;
		}
		.lred-bg {
			background-color: #ffbfbf;
		}
		.flred-path {
			stroke-width: 1px;
			fill: #ffbfbf;
		}
		.lred-path {
			stroke: #ffbfbf;
		}
		.green {
			color: #7fff7f;
		}
		.green-bg {
			background-color: #7fff7f;
		}
		.fgreen-path {
			stroke-width: 1px;
			fill: #7fff7f;
		}
		.green-path {
			stroke: #7fff7f;
		}
		.lgreen {
			color: #bfffbf;
		}
		.lgreen-bg {
			background-color: #bfffbf;
		}
		.flgreen-path {
			stroke-width: 1px;
			fill: #bfffbf;
		}
		.lgreen-path {
			stroke: #bfffbf;
		}
		.blue {
			color: #7f7fff;
		}
		.blue-bg {
			background-color: #7f7fff;
		}
		.fblue-path {
			stroke-width: 1px;
			fill: #7f7fff;
		}
		.blue-path {
			stroke: #7f7fff;
		}
		.lblue {
			color: #bfbfff;
		}
		.lblue-bg {
			background-color: #bfbfff;
		}
		.flblue-path {
			stroke-width: 1px;
			fill: #bfbfff;
		}
		.lblue-path {
			stroke: #bfbfff;
		}
		.cyan {
			color: #7fffff;
		}
		.cyan-bg {
			background-color: #7fffff;
		}
		.fcyan-path {
			stroke-width: 1px;
			fill: #7fffff;
		}
		.cyan-path {
			stroke: #7fffff;
		}
		.lcyan {
			color: #bfffff;
		}
		.lcyan-bg {
			background-color: #bfffff;
		}
		.llcyan {
			color: #dfffff;
		}
		.llcyan-bg {
			background-color: #dfffff;
		}
		.purple {
			color: #ff7fff;
		}
		.purple-bg {
			background-color: #ff7fff;
		}
		.fpurple-path {
			stroke-width: 1px;
			fill: #ff7fff;
		}
		.purple-path {
			stroke: #ff7fff;
		}
		.lpurple {
			color: #ffbfff;
		}
		.lpurple-bg {
			background-color: #ffbfff;
		}
		.llpurple {
			color: #ffdfff;
		}
		.llpurple-bg {
			background-color: #ffdfff;
		}
		.yellow {
			color: #ffff7f;
		}
		.yellow-bg {
			background-color: #ffff7f;
		}
		.fyellow-path {
			stroke-width: 1px;
			fill: #ffff7f;
		}
		.yellow-path {
			stroke: #ffff7f;
		}
		.lyellow {
			color: #ffffbf;
		}
		.lyellow-bg {
			background-color: #ffffbf;
		}
		.flyellow-path {
			stroke-width: 1px;
			fill: #ffffbf;
		}
		.lyellow-path {
			stroke: #ffffbf;
		}
		.llyellow {
			color: #ffffdf;
		}
		.llyellow-bg {
			background-color: #ffffdf;
		}
		.fllyellow-path {
			stroke-width: 1px;
			fill: #ffffdf;
		}
		.llyellow-path {
			stroke: #ffffdf;
		}
		.dbrown {
			color: #bf3f3f;
		}
		.dbrown-bg {
			background-color: #bf3f3f;
		}
		.fdbrown-path {
			stroke-width: 1px;
			fill: #bf3f3f;
		}
		.dbrown-path {
			stroke: #bf3f3f;
		}
		.dgreen {
			color: #3fbf3f;
		}
		.dgreen-bg {
			background-color: #3fbf3f;
		}
		.fdgreen-path {
			stroke-width: 1px;
			fill: #3fbf3f;
		}
		.dgreen-path {
			stroke: #3fbf3f;
		}
		.dblue {
			color: #3f3fbf;
		}
		.dblue-bg {
			background-color: #3f3fbf;
		}
		.fdblue-path {
			stroke-width: 1px;
			fill: #3f3fbf;
		}
		.dblue-path {
			stroke: #3f3fbf;
		}
		.cpurple {
			color: #bf3fff;
		}
		.cpurple-bg {
			background-color: #bf3fff;
		}
		.fcpurple-path {
			stroke-width: 1px;
			fill: #bf3fff;
		}
		.cpurple-path {
			stroke: #bf3fff;
		}
		.cpink {
			color: #ff7fbf;
		}
		.cpink-bg {
			background-color: #ff7fbf;
		}
		.fcpink-path {
			stroke-width: 1px;
			fill: #ff7fbf;
		}
		.cpink-path {
			stroke: #ff7fbf;
		}
		.cred {
			color: #ff3f3f;
		}
		.cred-bg {
			background-color: #ff3f3f;
		}
		.fcred-path {
			stroke-width: 1px;
			fill: #ff3f3f;
		}
		.cred-path {
			stroke: #ff3f3f;
		}
		.cdred {
			color: #bf0000;
		}
		.cdred-bg {
			background-color: #bf0000;
		}
		.fcdred-path {
			stroke-width: 1px;
			fill: #bf0000;
		}
		.cdred-path {
			stroke: #bf0000;
		}
		.cyellow {
			color: #ffdf7f;
		}
		.cyellow-bg {
			background-color: #ffdf7f;
		}
		.fcyellow-path {
			stroke-width: 1px;
			fill: #ffdf7f;
		}
		.cyellow-path {
			stroke: #ffdf7f;
		}
		.corange-path {
			stroke: #ffbf3f;
		}
		.corange {
			color: #ffbf3f;
		}
		.corange-bg {
			background-color: #ffbf3f;
		}
		.fcorange-path {
			stroke-width: 1px;
			fill: #ffbf3f;
		}
		.cbrown {
			color: #bf7f3f;
		}
		.cbrown-bg {
			background-color: #bf7f3f;
		}
		.fcbrown-path {
			stroke-width: 1px;
			fill: #bf7f3f;
		}
		.cbrown-path {
			stroke: #bf7f3f;
		}
		.sel-path {
			stroke-width: 1px;
			stroke: #ffff7f;
			fill: #ffff7f;
		}
		.square36 {
			display: grid;
			grid-template-columns: repeat(6,1fr);
			grid-template-rows: repeat(6,1fr);
			background: none;
			border: none;
			height: 380px;
			width: 380px;
			align-items: center;
		}
		.square48 {
			display: grid;
			grid-template-columns: repeat(8,1fr);
			grid-template-rows: repeat(3,1fr) 10px repeat(3,1fr);
			background: none;
			border: 2px solid;
			height: 490px;
			width: 640px;
			align-items: center;
		}
		.box {
			display: flex;
			flex-direction: column;
			border: 2px solid;
			overflow-x: hidden;
			overflow-y: auto;
			text-align: center;
		}
		.infobox {
			display: flex;
			flex-direction: column;
			border: 2px solid;
			font-size: 16px;
			width: 350px;
			padding: 10px;
			padding-top: 5px;
			text-align: center;
		}
		.highz {
			z-index: 6361;
		}
		.higherz {
			z-index: 6666;
		}
		.highestz {
			z-index: 6859;
		}
		.wider {
			stroke-width: 8px;
		}
		.wide {
			stroke-width: 3px;
		}
		.mwidth {
			stroke-width: 1.5px;
		}
		.narrow {
			stroke-width: 0.5px;
		}
		.narrowp {
			stroke-width: 0.1px;
		}
		.shsize {
			height: 20%;
			width: 20%;
		}
		.hsize {
			height: 50%;
			width: 50%;
		}
		.lhsize {
			height: 70%;
			width: 70%;
		}
		.bold {
			font-weight: bold;
		}
		.border {
			border: 3px solid;
		}
		.ns {
			stroke: none;
		}
		.npe {
			pointer-events: none;
		}
		.nd {
			display: none;
		}
	</style>
	<script>
		console.log("Try to use 'test()'/'test(0)'/'test(1)'")
		function test(asdfgh=0) {
			for(let i=0;i<48;i++) {
				getGrid(0,i%8+1,betterFloor(i/8)+1).replaceWith(createGrid(0,i%8+1,betterFloor(i/8)+1,"Petal_"+PetalNameList[i+48*asdfgh],1,roll(1,9)))
			}
		}
		const PetalNameList=["Basic","Light","Rock","Rose","Stinger","Iris","Wing","Missile","Grapes","Cactus","Faster","Bubble","Pollen","Dandelion","Beetle Egg","Antennae","Heavy","Yin Yang","Web","Honey","Leaf","Salt","Rice","Corn","Sand","Pincer","Yucca","Magnet","Yggdrasil","Starfish","Pearl","Lightning","Jelly","Claw","Shell","Dahlia","Sponge","Soil","Fangs","Third Eye","Peas","Stick","Clover","Powder","Air","Basil","Orange","Ant Egg","Poo","Relic","Lotus","Bulb","Cotton","Carrot","Bone","Plank","Tomato","Mark","Rubber","Blood Stinger","Bur","Root","Dice","Talisman","Battery","Amulet","Compass","Disc","Shovel","Coin","Chip","Card","Moon Rock","Privet","Glass","Corruption","Coral","Wax","Golden Leaf","Monstera","Domino","Triangle"]
		const PetalSVGArray=new Object()
		PetalSVGArray.Basic="<path class='fwhite-path ns' d='M50 25A13 13 0 0 0 50 51A13 13 0 0 0 50 25'/>"
		PetalSVGArray.Light="<path class='fwhite-path ns' d='M50 19.4A7 7 0 0 0 50 33.4A7 7 0 0 0 50 19.4M39 27.4A7 7 0 0 0 39 41.4A7 7 0 0 0 39 27.4M61 27.4A7 7 0 0 0 61 41.4A7 7 0 0 0 61 27.4M43.2 40.4A7 7 0 0 0 43.2 54.4A7 7 0 0 0 43.2 40.4M56.8 40.4A7 7 0 0 0 56.8 54.4A7 7 0 0 0 56.8 40.4'/>"
		PetalSVGArray.Rock="<path class='fgrey-path ns' d='M34 32L50 20L66 36L62 50L42 52Z'/>"
		PetalSVGArray.Rose="<path class='fcpink-path ns' d='M50 25A13 13 0 0 0 50 51A13 13 0 0 0 50 25'/>"
		PetalSVGArray.Stinger="<path class='fdgrey-path ns' d='M47 32.8L56 38L47 43.2Z'/>"
		PetalSVGArray.Iris="<path class='fcpurple-path ns' d='M50 31A7 7 0 0 0 50 45A7 7 0 0 0 50 31'/>"
		PetalSVGArray.Wing="<path class='fwhite-path ns' d='M36 48A40 40 0 0 0 65 26A20 20 0 0 1 36 48'/>"
		PetalSVGArray.Missile="<path class='fblack-path ns' d='M38 33L50 24L60.5 50.5Z'/>"
		PetalSVGArray.Grapes="<path class='fcpurple-path ns' d='M54 22A7 7 0 0 0 54 36A7 7 0 0 0 54 22M59 35A7 7 0 0 0 59 49A7 7 0 0 0 59 35M46 40A7 7 0 0 0 46 54A7 7 0 0 0 46 40M41 27A7 7 0 0 0 41 41A7 7 0 0 0 41 27'/>"
		PetalSVGArray.Cactus="<path class='fgreen-path ns' d='M50 24A12 12 0 0 0 59.9 28.1A12 12 0 0 0 64 38A12 12 0 0 0 59.9 47.9A12 12 0 0 0 50 52A12 12 0 0 0 40.1 47.9A12 12 0 0 0 36 38A12 12 0 0 0 40.1 28.1A12 12 0 0 0 50 24'/><path class='flgreen-path ns ' d='M50 30A8 8 0 0 0 50 46A8 8 0 0 0 50 30'/>"
		PetalSVGArray.Faster="<path class='flyellow-path ns' d='M50 31A7 7 0 0 0 50 45A7 7 0 0 0 50 31'/>"
		PetalSVGArray.Bubble="<path class='white-path wide' d='M50 24A14 14 0 0 0 50 52A14 14 0 0 0 50 24'/><path class='fwhite-path ns ' fill-opacity='0.3' d='M50 24A14 14 0 0 0 50 52A14 14 0 0 0 50 24'/><path class='fwhite-path ns ' fill-opacity='0.6' d='M55 30A5 5 0 0 0 55 40A5 5 0 0 0 55 30'/>"
		PetalSVGArray.Pollen="<path class='fyellow-path ns' d='M44.4 19.3A9 9 0 0 0 44.4 37.3A9 9 0 0 0 44.4 19.3M61.2 29A9 9 0 0 0 61.2 47A9 9 0 0 0 61.2 29M44.4 38.7A9 9 0 0 0 44.4 56.7A9 9 0 0 0 44.4 38.7'/>"
		PetalSVGArray.Dandelion="<path class='fblack-path ns' d='M37.6 30.2L29.6 22.2A2.2 2.2 0 0 1 32.7 19.1L40.7 27.1A15.5 15.5 0 0 0 37.6 30.2'/><path class='fwhite-path ns' d='M50 28A11.5 11.5 0 0 0 50 51A11.5 11.5 0 0 0 50 28'/>"
		PetalSVGArray["Beetle Egg"]="<path class='flyellow-path ns' d='M50 18A20 15 90 0 0 50 58A20 15 90 0 0 50 18'/>"
		PetalSVGArray.Antennae="<path class='fblack-path wide ns' d='M26 22A40 40 0 0 1 42 54ZM74 22A40 40 0 0 0 58 54Z'/>"
		PetalSVGArray.Heavy="<path class='fdgrey-path ns' d='M50 20A18 18 0 0 0 50 56A18 18 0 0 0 50 20'/><path class='flgrey-path ns ' d='M57 26A7 7 0 0 0 58 40A7 7 0 0 0 57 26'/>"
		PetalSVGArray["Yin Yang"]="<path class='fgrey-path ns ' d='M50 22A16 16 0 0 0 50 54A16 16 0 0 0 50 22'/><path class='fwhite-path ns ' d='M50 24A7 7 0 0 1 50 38A7 7 0 0 0 50 52A14 14 0 0 1 50 24'/><path class='fblack-path ns ' d='M50 24A7 7 0 0 1 50 38A7 7 0 0 0 50 52A14 14 0 0 0 50 24'/><path class='fwhite-path ns ' fill-opacity='0.9' d='M50 41.5A3.5 3.5 0 0 0 50 48.5A3.5 3.5 0 0 0 50 41.5'/><path class='fblack-path ns ' fill-opacity='0.9' d='M50 27.5A3.5 3.5 0 0 0 50 34.5A3.5 3.5 0 0 0 50 27.5'/>"
		PetalSVGArray.Web="<path class='fwhite-path ns' d='M39 34.4A15 15 0 0 0 50 26.4A15 15 0 0 0 61 34.4A15 15 0 0 0 56.8 47.4A15 15 0 0 0 43.2 47.4A15 15 0 0 0 39 34.4'/>"
		PetalSVGArray.Honey="<path class='fcyellow-path ns' d='M44.4 28.3L55.6 28.3L61.2 38L55.6 47.7L44.4 47.7L38.8 38Z'/>"
		PetalSVGArray.Leaf="<path class='fdgreen-path ns' d='M40 56.1A21 10 115 0 0 60.9 19.9A21 10 125 0 0 40 56.1'/><path class='dgreen-path wide' d='M34.4 65.8L40 56.1M42.6 51.6L55.3 29' style='filter: brightness(80%)'/>"
		PetalSVGArray.Salt="<path class='fwhite-path ns' d='M45 25L55 26L62 34L60 45L48 50L40 43L38 34Z'/>"
		PetalSVGArray.Rice="<path class='fwhite-path wide ns' d='M41 28A2 2 0 0 1 43.4 24.8L51.4 30.8A2 2 0 0 1 49 34ZM51 38A2 2 0 0 1 54.6 36.5L59.6 48.5A2 2 0 0 1 56 50Z'/>"
		PetalSVGArray.Corn="<path class='fyellow-path ns' d='M32 44L40 20A25 25 0 0 1 68 48L44 56A10 10 0 0 0 32 44'/>"
		PetalSVGArray.Sand="<path class='fcyellow-path ns' d='M50 21.1A7 7 0 0 0 50 35.1A7 7 0 0 0 50 21.1M59.9 31A7 7 0 0 0 59.9 45A7 7 0 0 0 59.9 31M50 40.9A7 7 0 0 0 50 54.9A7 7 0 0 0 50 40.9M40.1 31A7 7 0 0 0 40.1 45A7 7 0 0 0 40.1 31'/>"
		PetalSVGArray.Pincer="<path class='fblack-path wide ns' d='M38 34A12 12 0 0 1 54 50A30 13 135 0 0 38 34'/>"
		PetalSVGArray.Yucca="<path class='fgreen-path ns' d='M40 56.1A22 10 115 0 0 60.9 19.9A22 10 125 0 0 40 56.1'/><path class='green-path wide' d='M40 56.1L60.9 19.9' style='filter: brightness(80%)'/>"
		PetalSVGArray.Magnet="<path class='fred-path ns ' fill-opacity='0.8' d='M49.9 14.7L34.4 30.4A16.4 16.4 0 0 0 34.4 53.6L46.4 41.6A2.4 2.4 0 0 1 46.4 38.2L59.8 24.8Z'/><path class='fblue-path ns ' fill-opacity='0.8' d='M73.3 38.1L57.6 53.6A16.4 16.4 0 0 1 34.4 53.6L46.4 41.6A2.4 2.4 0 0 0 49.8 41.6L63.2 28.2Z'/><path class='fred-path ns ' d='M49.9 19.5L36.8 32.8A13 13 0 0 0 36.8 51.2L44 44A5.8 5.8 0 0 1 44 35.8L55 24.8Z'/><path class='fblue-path ns ' d='M68.5 38.1L55.2 51.2A13 13 0 0 1 36.8 51.2L44 44A5.8 5.8 0 0 0 52.2 44L63.2 33Z'/>"
		PetalSVGArray.Yggdrasil="<path class='fcbrown-path ns' d='M40 56.1A21 10 115 0 0 60.9 19.9A21 10 125 0 0 40 56.1'/><path class='cbrown-path wide' d='M34.4 65.8L40 56.1M42.6 51.6L55.3 29' style='filter: brightness(80%)'/>"
		PetalSVGArray.Starfish="<path class='fred-path ns' d='M37 44L49 53L65.2 21.4A1.6 1.6 0 0 0 62.8 19.6Z'/><path class='flred-path ns ' d='M47.5 38.5A4 4 0 0 0 47.5 46.5A4 4 0 0 0 47.5 38.5M53.5 32A2.5 2.5 0 0 0 53.5 37A2.5 2.5 0 0 0 53.5 32'/>"
		PetalSVGArray.Pearl="<path class='flyellow-path ns' d='M50 20A18 18 0 0 0 50 56A18 18 0 0 0 50 20'/><path class='fwhite-path ns ' d='M57 26A7 7 0 0 0 58 40A7 7 0 0 0 57 26'/>"
		PetalSVGArray.Lightning="<path class='fcyan-path wide ns' d='M54 24L42 40L48 40L46 52L58 36L52 36Z'/>"
		PetalSVGArray.Jelly="<path class='purple-path wide' d='M50 23A15 15 0 0 0 50 53A15 15 0 0 0 50 23'/><path class='fpurple-path ns ' fill-opacity='0.3' d='M50 23A15 15 0 0 0 50 53A15 15 0 0 0 50 23'/><path class='fpurple-path ns ' fill-opacity='0.3' d='M47 28A3 3 0 0 0 47 34A3 3 0 0 0 47 28M52 35A3 3 0 0 0 52 41A3 3 0 0 0 52 35M46 43A3 3 0 0 0 46 49A3 3 0 0 0 46 43M57 40A3 3 0 0 0 57 46A3 3 0 0 0 57 40'/>"
		PetalSVGArray.Claw="<path class='fdbrown-path wide ns' d='M46 50L38 30L60 28A8 4 0 0 0 60 36L44 34Z'/>"
		PetalSVGArray.Shell="<path class='fcyellow-path ns' d='M38 38L58 22A20 20 0 0 1 58 54Z'/><path class='cyellow-path wide' d='M42 37L60 29M42 38L63 38M42 39L60 47' style='filter: brightness(80%)'/>"
		PetalSVGArray.Dahlia="<path class='fcpink-path ns' d='M45.9 23.9A7 7 0 0 0 45.9 37.9A7 7 0 0 0 45.9 23.9M58.2 31A7 7 0 0 0 58.2 45A7 7 0 0 0 58.2 31M45.9 38.1A7 7 0 0 0 45.9 52.1A7 7 0 0 0 45.9 38.1'/>"
		PetalSVGArray.Sponge="<path class='flyellow-path ns ' d='M50 23A12 12 0 0 0 35 23A12 12 0 0 0 35 38A12 12 0 0 0 35 53A12 12 0 0 0 50 53L41 50A3 3 0 0 1 41 44L41 41A3 3 0 0 1 41 35L41 32A3 3 0 0 1 41 26ZM50 23A12 12 0 0 1 65 23A12 12 0 0 1 65 38A12 12 0 0 1 65 53A12 12 0 0 1 50 53L59 50A3 3 0 0 0 59 44L59 41A3 3 0 0 0 59 35L59 32A3 3 0 0 0 59 26ZM50 23L50 26A3 3 0 0 0 50 32L50 35A3 3 0 0 0 50 41L50 44A3 3 0 0 0 50 50L50 53L41 50A3 3 0 0 0 41 44L41 41A3 3 0 0 0 41 35L41 32A3 3 0 0 0 41 26ZM50 23L59 26A3 3 0 0 0 59 32L59 35A3 3 0 0 0 59 41L59 44A3 3 0 0 0 59 50L50 53L50 50A3 3 0 0 0 50 44L50 41A3 3 0 0 0 50 35L50 32A3 3 0 0 0 50 26Z'/><path class='lyellow-path wide' d='M35 23A12 12 0 0 1 50 23A12 12 0 0 1 65 23A12 12 0 0 1 65 38A12 12 0 0 1 65 53A12 12 0 0 1 50 53A12 12 0 0 1 35 53A12 12 0 0 1 35 38A12 12 0 0 1 35 23' style='filter: brightness(80%)'/>"
		PetalSVGArray.Soil="<path class='fdbrown-path ns' d='M39 35L50 26L57 30L61 37L58 47L47 49L42 46Z'/>"
		PetalSVGArray.Fangs="<path class='fcdred-path wide ns' d='M45.5 24.5L54.5 36.5L54.5 51.5L45.5 39.5Z'/>"
		PetalSVGArray["Third Eye"]="<path class='fblack-path mwidth ns' d='M50 20A18 7 90 0 0 50 56A18 7 90 0 0 50 20M60 16L64 16M64 16L64 24M64 24L60 24M60 20L64 20'/><path class='fwhite-path ns ' d='M50 32A6 6 0 0 0 50 44A6 6 0 0 0 50 32'/>"
		PetalSVGArray.Peas="<path class='fgreen-path ns' d='M54 22A7 7 0 0 0 54 36A7 7 0 0 0 54 22M59 35A7 7 0 0 0 59 49A7 7 0 0 0 59 35M46 40A7 7 0 0 0 46 54A7 7 0 0 0 46 40M41 27A7 7 0 0 0 41 41A7 7 0 0 0 41 27'/>"
		PetalSVGArray.Stick="<path class='fdbrown-path wide' stroke-linecap='round' d='M50 38L32 48M50 38L60 24M50 38L64 38' style='filter: brightness(50%)'/>"
		PetalSVGArray.Clover="<path class='fgreen-path ns' d='M50 38L44 30A6 6 0 0 1 56 30ZM50 38L58 32A6 6 0 0 1 58 44ZM50 38L56 46A6 6 0 0 1 44 46ZM50 38L42 44A6 6 0 0 1 42 32Z'/>"
		PetalSVGArray.Powder="<path class='fwhite-path ns ' d='M50 27A12 12 0 0 0 50 51A12 12 0 0 0 50 27M41 22A6 6 0 0 0 41 34A6 6 0 0 0 41 22M59 22A6 6 0 0 0 59 34A6 6 0 0 0 59 22'/>"
		PetalSVGArray.Air="<path class='fwhite-path ns ' fill-opacity='0.1' d='M0 0L100 0L100 100L0 100'/>"
		PetalSVGArray.Basil="<path class='fdgreen-path ns' d='M41.8 23.8L49.6 28.3A5.2 5.2 0 1 1 41.8 32.8ZM66.4 38L58.6 42.5A5.2 5.2 0 1 1 58.6 33.5ZM41.8 52.2L41.8 43.2A5.2 5.2 0 1 1 49.6 47.7Z'/>"
		PetalSVGArray.Orange="<path class='fcyellow-path ns' d='M44.4 19.3A9 9 0 0 0 44.4 37.3A9 9 0 0 0 44.4 19.3M61.2 29A9 9 0 0 0 61.2 47A9 9 0 0 0 61.2 29M44.4 38.7A9 9 0 0 0 44.4 56.7A9 9 0 0 0 44.4 38.7'/><path class='dgreen-path wide' d='M44.4 24.3L44.4 14.3M44.4 20.3L48.4 20.3M61.2 34L61.2 24M61.2 30L65.2 30M44.4 43.7L44.4 33.7M44.4 39.7L48.4 39.7'/>"
		PetalSVGArray["Ant Egg"]="<path class='flyellow-path ns' d='M50 20.1A8 8 0 0 0 50 36.1A8 8 0 0 0 50 20.1M59.9 30A8 8 0 0 0 59.9 46A8 8 0 0 0 59.9 30M50 39.9A8 8 0 0 0 50 55.9A8 8 0 0 0 50 39.9M40.1 30A8 8 0 0 0 40.1 46A8 8 0 0 0 40.1 30'/>"
		PetalSVGArray.Poo="<path class='fblack-path wide' d='M50 26.8L50 49.2M40.3 32.4L59.7 43.6M59.7 32.4L40.3 43.6'/>"
		PetalSVGArray.Relic="<path class='fcyellow-path ns' d='M50 28A12 12 0 0 0 60 38A12 12 0 0 0 50 48A12 12 0 0 0 40 38A12 12 0 0 0 50 28'/>"
		PetalSVGArray.Lotus="<path class='fcpurple-path ns' d='M50 30A8 8 0 0 0 50 46A8 8 0 0 0 50 30M50 24A16 8 90 0 0 50 52A16 8 90 0 0 50 24M59.9 28.1A16 8 135 0 0 40.1 47.9A16 8 135 0 0 59.9 28.1M64 38A16 8 0 0 0 36 38A16 8 0 0 0 64 38M59.9 47.9A16 8 45 0 0 40.1 28.1A16 8 45 0 0 59.9 47.9'/><path class='fcpurple-path ns ' d='M50 34A4 4 0 0 0 50 42A4 4 0 0 0 50 34' style='filter: brightness(80%)'/>"
		PetalSVGArray.Bulb="<path class='fgrey-path ns ' d='M45 48L55 48L55 54L45 54Z'/><path class='fyellow-path ns ' d='M45 48L41 40A11 11 0 1 1 59 40L55 48Z'/><path class='flyellow-path ns ' fill-opacity='0.3' d='M50 12A25 25 0 0 0 50 62A25 25 0 0 0 50 12'/>"
		PetalSVGArray.Cotton="<path class='fwhite-path ns ' d='M50 23A12 12 0 0 0 35 23A12 12 0 0 0 35 38A12 12 0 0 0 35 53A12 12 0 0 0 50 53L41 49A2 2 0 0 1 41 45L41 40A2 2 0 0 1 41 36L41 31A2 2 0 0 1 41 27ZM50 23A12 12 0 0 1 65 23A12 12 0 0 1 65 38A12 12 0 0 1 65 53A12 12 0 0 1 50 53L59 49A2 2 0 0 0 59 45L59 40A2 2 0 0 0 59 36L59 31A2 2 0 0 0 59 27ZM50 23L50 27A2 2 0 0 0 50 31L50 36A2 2 0 0 0 50 40L50 45A2 2 0 0 0 50 49L50 53L41 49A2 2 0 0 0 41 45L41 40A2 2 0 0 0 41 36L41 31A2 2 0 0 0 41 27ZM50 23L59 27A2 2 0 0 0 59 31L59 36A2 2 0 0 0 59 40L59 45A2 2 0 0 0 59 49L50 53L50 49A2 2 0 0 0 50 45L50 40A2 2 0 0 0 50 36L50 31A2 2 0 0 0 50 27Z'/><path class='white-path wide' d='M35 23A12 12 0 0 1 50 23A12 12 0 0 1 65 23A12 12 0 0 1 65 38A12 12 0 0 1 65 53A12 12 0 0 1 50 53A12 12 0 0 1 35 53A12 12 0 0 1 35 38A12 12 0 0 1 35 23' style='filter: brightness(80%)'/>"
		PetalSVGArray.Carrot="<path class='fcorange-path ns' d='M42 30A30 8 60 0 1 65 53A30 8 30 0 1 42 30'/><path class='dgreen-path wide' d='M41 29L32 29M41 29L34 22M41 29L41 20'/>"
		PetalSVGArray.Bone="<path class='fwhite-path ns' d='M40 26L40 20L60 20L60 26L54 26L54 50L60 50L60 56L40 56L40 50L46 50L46 28Z'/>"
		PetalSVGArray.Plank="<path class='fdbrown-path ns' d='M30 28L40 18L70 48L60 58Z'/><path class='dbrown-path wide' d='M40 26A2 2 0 0 0 40 30A2 2 0 0 0 40 26' style='filter: brightness(80%)'/>"
		PetalSVGArray.Tomato="<path class='fcred-path ns' d='M50 27A16 12 0 0 0 50 51A16 12 0 0 0 50 27'/><path class='dgreen-path wide' d='M50 26L42 20M50 26L50 16M50 26L58 20'/>"
		PetalSVGArray.Mark="<path class='fcdred-path ns ' d='M46.1 50L46.1 26L60.2 45.4L37.4 38L60.2 30.6Z'/><path class='cdred-path mwidth' d='M46.1 50L46.1 26L60.2 45.4L37.4 38L60.2 30.6Z' style='filter: brightness(80%)'/>"
		PetalSVGArray.Rubber="<path class='fwhite-path ns' d='M40 33L55 28L60 43L45 48Z'/>"
		PetalSVGArray["Blood Stinger"]="<path class='fcdred-path ns' d='M47 32.8L56 38L47 43.2Z'/>"
		PetalSVGArray.Bur="<path class='fcdred-path wide ns' d='M50 31.5L55 26L54.6 33.4L62 33L56.5 38L62 43L54.6 42.6L55 50L50 44.5L45 50L45.4 42.6L38 43L43.5 38L38 33L45.4 33.4L45 26Z'/>"
		PetalSVGArray.Root="<path class='fwhite-path wide ns' d='M50 29A2 2 0 0 0 50 25A2 2 0 0 0 50 29L50 35M50 35L40 41M50 35L60 41M40 41L35 47M40 41L45 47M60 41L55 47M60 41L65 47'/>"
		PetalSVGArray.Dice="<path class='fwhite-path ns' d='M36 24L64 24L64 52L36 52Z'/><path class='fblue-path ns ' d='M58 27A3 3 0 0 0 58 33A3 3 0 0 0 58 27M50 35A3 3 0 0 0 50 41A3 3 0 0 0 50 35M42 43A3 3 0 0 0 42 49A3 3 0 0 0 42 43'/>"
		PetalSVGArray.Talisman="<path class='black-path mwidth' stroke-linecap='round' stroke-linejoin='round' d='M50 26.8L40.3 43.6L59.7 43.6L50 26.8L50 43.6A5.6 5.6 0 0 0 50 32.4A5.6 5.6 0 0 0 50 43.6'/>"
		PetalSVGArray.Battery="<path class='fgreen-path ns' d='M38 22L62 22L62 56L38 56Z'/><path class='fgrey-path wide ns' d='M44 20L44 15L56 15L56 20Z'/><path class='fcyan-path ns ' d='M54 24L42 40L48 40L46 52L58 36L52 36Z' style='filter: brightness(80%)'/>"
		PetalSVGArray.Amulet="<path class='fcpink-path ns' d='M44.4 28.3L55.6 28.3L61.2 38L55.6 47.7L44.4 47.7L38.8 38Z'/><path class='fcpink-path ns ' d='M50 32A6 6 0 0 0 50 44A6 6 0 0 0 50 32' style='filter: brightness(80%)'/>"
		PetalSVGArray.Disc="<path class='black-path wider' d='M50 25A13 13 0 0 0 50 51A13 13 0 0 0 50 25'/>"
		PetalSVGArray.Shovel="<path class='fdbrown-path wide ns' d='M41 51L45 53L53 37L49 35Z'/><path class='fgrey-path wide ns' d='M45 33L48 27A7 7 0 0 1 60 33L57 39Z'/>"
		PetalSVGArray.Coin="<path class='fyellow-path ns' d='M50 25A13 13 0 0 0 50 51A13 13 0 0 0 50 25'/><path class='yellow-path wide' d='M50 28L50 32M53 35A3 3 0 1 0 50 38A3 3 0 1 1 47 41M50 44L50 48' style='filter: brightness(80%)'/>"
		PetalSVGArray.Chip="<path class='fcpurple-path ns' d='M50 25A13 13 0 0 0 50 51A13 13 0 0 0 50 25'/><path class='white-path ' d='M45.9 25.7L54.1 25.7M55.8 26.4L61.6 32.2M62.3 33.9L62.3 42.1M61.6 43.8L55.8 49.6M54.1 50.3L45.9 50.3M44.2 49.6L38.4 43.8M37.7 42.1L37.7 33.9M38.4 32.2L44.2 26.4'/>"
		PetalSVGArray.Card="<path class='fgrey-path ns' d='M38 20L62 20L62 56L38 56Z'/><path class='fwhite-path ns ' d='M38 38A18 12 90 0 0 62 38A18 12 90 0 0 38 38'/><path class='black-path mwidth' d='M41 31L48 31L48 45M59 38L52 38L52 31L59 31L59 45L52 45'/>"
		PetalSVGArray["Moon Rock"]="<path class='fgrey-path wide ns' d='M50 13A25 25 0 0 0 50 63A25 25 0 0 0 75 38A35 35 0 0 0 50 13'/>"
		PetalSVGArray.Privet="<path class='fblack-path ns' d='M50 34A4 4 0 0 0 50 42A4 4 0 0 0 50 34'/>"
		PetalSVGArray.Glass="<path class='fwhite-path ns ' fill-opacity='0.3' d='M35 46L50 32L65 36'/>"
		PetalSVGArray.Corruption="<path class='fblack-path ns ' fill-opacity='0.2' d='M36 56L36 34L42 34A3 3 0 0 0 48 34L52 34A3 3 0 0 0 58 34L64 34L64 56L57 45L50 51L43 45ZM36 34L42 34A3 3 0 0 1 48 34L52 34A3 3 0 0 1 58 34L64 34A14 14 0 0 0 36 34'/>"
		PetalSVGArray.Coral="<path class='cpurple-path' stroke-linecap='round' d='M50 38L40 48M50 38L46 26M50 38L60 28M50 38L62 42'/>"
		PetalSVGArray.Wax="<path class='fcyellow-path ns' d='M38.8 18.6L61.2 18.6L72.4 38L61.2 57.4L38.8 57.4L27.6 38Z'/>"
		PetalSVGArray["Golden Leaf"]="<path class='fcyellow-path ns' d='M40 56.1A21 10 115 0 0 60.9 19.9A21 10 125 0 0 40 56.1'/><path class='cyellow-path wide' d='M34.4 65.8L40 56.1M42.6 51.6L55.3 29' style='filter: brightness(80%)'/>"
		PetalSVGArray.Monstera="<path class='fdgreen-path ns' d='M46 50L46 54L54 54L54 50L66 46L58 43L65 40L57 37L63 33L55 33L57 27L53 30L50 22L47 30L43 27L45 33L37 33L43 37L35 40L42 43L34 46Z'/><path class='dgreen-path wide' d='M50 30L50 50' style='filter: brightness(80%)'/>"
		PetalSVGArray.Domino="<path class='fwhite-path ns' d='M32 32L44 20L68 44L56 56Z'/><path class='black-path mwidth' d='M38 30L42 26L50 34M58 42L54 46L50 42L54 38L62 46L58 50M46 42L54 34'/>"
		PetalSVGArray.Triangle="<path class='fwhite-path ns' d='M47 32.8L56 38L47 43.2Z'/>"
		for(let i in PetalNameList) if(i!=="66") {
			PetalSVGArray[PetalNameList[i]]="<svg viewBox='0 0 100 100' class='in-svg'><path class='fblack-path ns' fill-opacity='0.2' d='M0 0L100 0L100 100L92 92L92 8L8 8ZM0 0L0 100L100 100L92 92L8 92L8 8Z'/>"+PetalSVGArray[PetalNameList[i]].replaceAll(/<path class='(f\w+-path (ns |wider?|mwidth)|\w+-path)'.+?\/>/g,"").replaceAll("class='f","class='").replaceAll("ns'","wider' stroke-linecap='round' stroke-linejoin='round' style='filter: brightness(80%)'")+PetalSVGArray[PetalNameList[i]].replaceAll("ns '","ns'").replaceAll("path '","path'")+"</svg><span class='mid nowrap bold' style='--transform2: translate(0px,20px)'>"+PetalNameList[i].replace("Blood Stinger","B. Stinger")+"</span>"
		}
		PetalSVGArray.Compass="<svg viewBox='0 0 100 100' class='in-svg'><path class='fblack-path ns' fill-opacity='0.2' d='M0 0L100 0L100 100L92 92L92 8L8 8ZM0 0L0 100L100 100L92 92L8 92L8 8Z'/></svg><svg viewBox='0 0 100 76' class='in-svg' style='position: absolute; height: 76%; top: 0px; left: 0px'><g style='transform: rotate(45deg)'><path class='fblue-path ns' d='M50 18A20 20 0 0 0 50 58A20 20 0 0 0 50 18'/><path class='fred-path ns' d='M46 38L50 20L54 38Z'/><path class='fwhite-path ns' d='M46 38L50 56L54 38Z'/></g></svg><span class='mid nowrap bold' style='--transform2: translate(0px,20px)'>Compass</span>"
		function Petal(id=0,rarity=1,level=0) {
			this.id=id,this.rarity=rarity,this.level=level
			this.name="Basic"
			this.health=79,this.currenthealth=this.health
			this.damage=56
			this.speed=20
			this.reload=20
			this.atkbuff=roll(-10,10)
			if(this.atkbuff*this.atkbuff>10) this.atkbuff=roll(-10,10)
			if(this.atkbuff*this.atkbuff>30) this.atkbuff=roll(-10,10)
			if(this.atkbuff*this.atkbuff>60) this.atkbuff=roll(-10,10)
			this.defbuff=roll(-10,10)
			if(this.defbuff*this.defbuff>10) this.defbuff=roll(-10,10)
			if(this.defbuff*this.defbuff>30) this.defbuff=roll(-10,10)
			if(this.defbuff*this.defbuff>60) this.defbuff=roll(-10,10)
			this.actionbar=0,this.special=0,this.x=0,this.y=0,this.select=0
		}
		Petal.prototype.move=function(dir) {
		}
	</script>
	<script>
		const version=20250812
		const svgNS="http://www.w3.org/2000/svg"
		const rarityColor=["#000000","#7eef6d","#ffe65d","#4d52e3","#861fde","#de1f1f","#1fdbde","#ff2b75","#2bffa3","#555555"]
		const mapArray=[10,11,12,13,14,15,16,17,21,22,23,24,25,26,31,32,33,34,35,36,37,38,39,41,42,43,44,51,52,53,54,55,56,61,62,63,64,65,66,67]
		const pathArray=[1011,1013,1112,1121,1131,1213,1214,1241,1314,1315,1416,1451,1516,1517,1617,1724,1739,2122,2224,2225,2226,2324,2325,2353,2461,2526,3132,3133,3233,3236,3239,3334,3335,3436,3438,3537,3538,3639,3738,3761,3943,4142,4243,4244,4344,5152,5153,5253,5354,5355,5455,5556,5664,6162,6263,6265,6364,6365,6466,6566,6667]
		const tutorialOrder=[10,11,12,14,21,22,24,31,41,42,43,51,52,53,23,61,62,63,64,65,66,67]
		let userVersion=JSON.parse(localStorage.getItem("userVersion"))
		if(!userVersion) userVersion=version
		localStorage.setItem("userVersion",JSON.stringify(userVersion))
		let player=JSON.parse(localStorage.getItem("player"))
		let explore=JSON.parse(localStorage.getItem("explore"))
		let fight=JSON.parse(localStorage.getItem("fight"))
		if(!player) player=new Object()
		if(!explore) explore=new Object()
		if(!fight) fight=new Object()
		if(!player.calendar) player.calendar=new Object()
		if(!player.calendar.day) player.calendar.day=60
		if(!player.calendar.hour) player.calendar.hour=1
		if(!player.calendar.minute) player.calendar.minute=1
		if(!player.calendar.second) player.calendar.second=0
		if(!player.level) player.level=1
		if(!player.exp) player.exp=0
		if(!player.health) player.health=150
		if(!player.inventory) player.inventory=new Object()
		if(!player.gallery) player.gallery=new Object()
		if(!explore.floor) explore.floor=0
		if(!explore.targetspot) explore.targetspot=10
		explore.flowerspot=explore.targetspot
		if(!explore.highest) explore.highest=100*explore.floor+explore.flowerspot
		if(!explore.explored) explore.explored=new Object()
		for(let i in mapArray) if(!explore.explored[mapArray[i]]) explore.explored[mapArray[i]]=false
		explore.explored[10]=true
		if(!fight.active) fight.active=false
		localStorage.setItem("player",JSON.stringify(player))
		localStorage.setItem("explore",JSON.stringify(explore))
		localStorage.setItem("fight",JSON.stringify(fight))
		function delay(time) {
			return new Promise(resolve => setTimeout(resolve,time))
		}
		async function copyToClipboard(text) {
			await navigator.clipboard.writeText(text)
		}
		function betterFloor(num) {
			return Math.floor(num+1e-10)
		}
		function isPFLF(num) {
			return (betterFloor(num**0.5)**2===num || betterFloor(num**(1/3))**3===num)
		}
		function numLength(num) {
			if(num===0) return 0
			return num.toString().length
		}
		function color(type) {
			switch(type) {
				case 1:
				return "#ff0000"
				case 2:
				return "#0000ff"
				case 3:
				return "#ff00ff"
				default:
				return "#00ff00"
			}
		}
		function createDice(value,point) {
			let newDice=document.createElement("button")
			newDice.type="button"
			newDice.setAttribute("class","dice")
			newDice.setAttribute("onclick","clickDice(this)")
			newDice.value=value
			switch(point) {
				case 1:
				newDice.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M20 10L80 10A10 10 0 0 1 90 20L90 80A10 10 0 0 1 80 90L20 90A10 10 0 0 1 10 80L10 20A10 10 0 0 1 20 10'/><path class='fblack-path' d='M50 45A5 5 0 0 0 50 55A5 5 0 0 0 50 45'/></svg>1"
				break
				case 2:
				newDice.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M20 10L80 10A10 10 0 0 1 90 20L90 80A10 10 0 0 1 80 90L20 90A10 10 0 0 1 10 80L10 20A10 10 0 0 1 20 10'/><path class='fblack-path' d='M50 30A5 5 0 0 0 50 40A5 5 0 0 0 50 30M50 60A5 5 0 0 0 50 70A5 5 0 0 0 50 60'/></svg>2"
				break
				case 3:
				newDice.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M20 10L80 10A10 10 0 0 1 90 20L90 80A10 10 0 0 1 80 90L20 90A10 10 0 0 1 10 80L10 20A10 10 0 0 1 20 10'/><path class='fblack-path' d='M33 62A5 5 0 0 0 33 72A5 5 0 0 0 33 62M50 45A5 5 0 0 0 50 55A5 5 0 0 0 50 45M67 28A5 5 0 0 0 67 38A5 5 0 0 0 67 28'/></svg>3"
				break
				case 4:
				newDice.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M20 10L80 10A10 10 0 0 1 90 20L90 80A10 10 0 0 1 80 90L20 90A10 10 0 0 1 10 80L10 20A10 10 0 0 1 20 10'/><path class='fblack-path' d='M35 30A5 5 0 0 0 35 40A5 5 0 0 0 35 30M65 30A5 5 0 0 0 65 40A5 5 0 0 0 65 30M35 60A5 5 0 0 0 35 70A5 5 0 0 0 35 60M65 60A5 5 0 0 0 65 70A5 5 0 0 0 65 60'/></svg>4"
				break
				case 5:
				newDice.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M20 10L80 10A10 10 0 0 1 90 20L90 80A10 10 0 0 1 80 90L20 90A10 10 0 0 1 10 80L10 20A10 10 0 0 1 20 10'/><path class='fblack-path' d='M35 30A5 5 0 0 0 35 40A5 5 0 0 0 35 30M65 30A5 5 0 0 0 65 40A5 5 0 0 0 65 30M35 60A5 5 0 0 0 35 70A5 5 0 0 0 35 60M65 60A5 5 0 0 0 65 70A5 5 0 0 0 65 60M50 45A5 5 0 0 0 50 55A5 5 0 0 0 50 45'/></svg>5"
				break
				case 6:
				newDice.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M20 10L80 10A10 10 0 0 1 90 20L90 80A10 10 0 0 1 80 90L20 90A10 10 0 0 1 10 80L10 20A10 10 0 0 1 20 10'/><path class='fblack-path' d='M35 28A5 5 0 0 0 35 38A5 5 0 0 0 35 28M65 28A5 5 0 0 0 65 38A5 5 0 0 0 65 28M35 45A5 5 0 0 0 35 55A5 5 0 0 0 35 45M65 45A5 5 0 0 0 65 55A5 5 0 0 0 65 45M35 62A5 5 0 0 0 35 72A5 5 0 0 0 35 62M65 62A5 5 0 0 0 65 72A5 5 0 0 0 65 62'/></svg>6"
				break
				default:
				newDice.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M20 10L80 10A10 10 0 0 1 90 20L90 80A10 10 0 0 1 80 90L20 90A10 10 0 0 1 10 80L10 20A10 10 0 0 1 20 10'/></svg>?"
			}
			return newDice
		}
		function getDice(value) {
			return document.querySelector("[value='"+value+"']")
		}
		function clickDice(button) {
			let buttonValue=parseInt(button.value)
			return
		}
		function createGrid(value,x,y,text,size=0,rarity=0) {
			let newGrid=document.createElement("button")
			newGrid.type="button"
			newGrid.setAttribute("class","grid")
			if(size===1) newGrid.setAttribute("class","bgrid")
			if(rarity>=1 && rarity<=9) newGrid.style["background-color"]=rarityColor[rarity]
			newGrid.setAttribute("onclick","clickGrid(this)")
			newGrid.value=value
			newGrid.dataset.x=x
			newGrid.dataset.y=y
			newGrid.innerHTML="Â·"
			if(text==="Diamond") newGrid.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M50 10A40 40 0 0 0 50 90A40 40 0 0 0 50 10'/><path class='fgreen-path' d='M26 46L50 75L74 46L66 32L34 32ZL42 46L50 75L58 46L74 46M50 32L42 46L58 46Z''/></svg><span style='display: none'>Diamond</span>"
			if(text==="Cross") newGrid.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M20 20L80 80M80 20L20 80'/></svg><span style='display: none'>Cross</span>"
			if(text==="Line") newGrid.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M0 50L100 50'/></svg><span style='display: none'>Line</span>"
			if(text==="Empty") newGrid.innerHTML="<span class='lgrey text3'>Empty</span>"
			if(typeof(text)==="number" && text!==0) newGrid.innerHTML="<svg viewBox='0 0 100 100' class='in-svg'><path d='M50 10L90 50L50 90L10 50Z'/></svg><span class='mid'>"+text+"</span>"
			if(text.startsWith("Petal")) newGrid.innerHTML=PetalSVGArray[text.slice(6)]
			return newGrid
		}
		function getGrid(value,x,y) {
			return document.querySelector("[value='"+value+"'][data-x='"+x+"'][data-y='"+y+"']")
		}
		function clickGrid(button) {
			let buttonValue=parseInt(button.value),buttonX=parseInt(button.getAttribute("data-x")),buttonY=parseInt(button.getAttribute("data-y"))
			return
		}
		function roll(lowerLimit,upperLimit) {
			return Math.floor(Math.random()*(upperLimit-lowerLimit+1)+lowerLimit)
		}
		function dice() {
			return roll(1,6)
		}
		let cogDegree=0
		function cogRotate() {
			if(document.getElementById("settings").style.display==="flex") {
				cogDegree=(cogDegree+1)%360
				document.getElementById("cog").style.transform="rotate("+cogDegree+"deg)"
			}
		}
		let flowerDegree=0,flowerSpin=1
		function flowerRotate() {
			if(document.getElementById("inventory").style.display==="flex") {
				flowerDegree=(flowerDegree+1)%720
				document.getElementById("flower").style.transform="rotate("+540*Math.sin(flowerDegree/360*Math.PI)*flowerSpin+"deg)"
			}
		}
		let ladybugDegree=roll(0,359),ladybugMovement=0,ladybugTurn=1,ladybugX=roll(0,99),ladybugY=roll(0,99)
		function ladybugMove() {
			if(document.getElementById("gallery").style.display==="flex") {
				if(ladybugMovement===0) {
					ladybugTurn=roll(0,10)
					if(ladybugTurn>=1 && ladybugTurn<=9) ladybugTurn=roll(0,10)
					if(ladybugTurn>=1 && ladybugTurn<=5) ladybugTurn=roll(0,10)
					if(ladybugTurn>=1 && ladybugTurn<=3) ladybugTurn=roll(0,10)
					if(ladybugTurn>=1 && ladybugTurn<=2) ladybugTurn=roll(0,10)
					if(dice()<4) ladybugTurn*=-1
				}
				if(ladybugMovement<180 && roll(1,90)*Math.abs(ladybugTurn)>Math.abs(90-ladybugMovement)*10) {
					ladybugDegree=(ladybugDegree+Math.sign(ladybugTurn)+360)%360
					document.getElementById("ladybug").style.transform="rotate("+ladybugDegree+"deg)"
				}
				if(ladybugMovement>=180 && roll(1,90)*Math.abs(ladybugTurn)>Math.abs(270-ladybugMovement)*10) {
					ladybugX=(ladybugX+Math.sin(ladybugDegree/180*Math.PI)+100)%100
					ladybugY=(ladybugY-Math.cos(ladybugDegree/180*Math.PI)+100)%100
					document.getElementById("ladybug-bg").style.transform="translate(-"+ladybugX+"px, -"+ladybugY+"px)"
				}
				ladybugMovement=(ladybugMovement+1)%360
			}
		}
		function closeAll() {
			if(document.getElementById("settings").style.display==="flex") settings(false)
			if(document.getElementById("help").style.display==="flex") howToPlay(false)
			if(document.getElementById("inventory").style.display==="flex") openInventory(false)
			if(document.getElementById("gallery").style.display==="flex") openGallery(false)
		}
		function settings(open=true) {
			if(open && document.getElementById("settings").style.display==="flex") {
				settings(false)
				return
			}
			if(!open) {
				document.getElementById("settings").style.display="none"
				return
			}
			closeAll()
			document.getElementById("settings").style.display="flex"
		}
		function howToPlay(open=true) {
			if(open && document.getElementById("help").style.display==="flex") {
				howToPlay(false)
				return
			}
			if(!open) {
				document.getElementById("help").style.display="none"
				document.getElementById("helpsvg").setAttribute("d","M50 2A48 48 0 0 0 50 98A48 48 0 0 0 50 2M35 35A15 15 0 1 1 59 47A22.5 22.5 0 0 0 50 65")
				return
			}
			closeAll()
			document.getElementById("help").style.display="flex"
			document.getElementById("helpsvg").setAttribute("d","M50 2A48 48 0 0 0 50 98A48 48 0 0 0 50 2M50 18L50 62")
		}
		function openInventory(open=true) {
			if(open && document.getElementById("inventory").style.display==="flex") {
				openInventory(false)
				return
			}
			if(!open) {
				document.getElementById("inventory").style.display="none"
				flowerDegree=0
				document.getElementById("flower").style.transform=""
				return
			}
			closeAll()
			document.getElementById("inventory").style.display="flex"
			flowerSpin=1
			if(dice()===1) flowerSpin=-1
			if(dice()===1) flowerSpin*=3
		}
		function openGallery(open=true) {
			if(open && document.getElementById("gallery").style.display==="flex") {
				openGallery(false)
				return
			}
			if(!open) {
				document.getElementById("gallery").style.display="none"
				document.getElementById("ladybug").style.scale=1.2
				document.getElementById("ladybug-bg").style.display="none"
				ladybugMovement=0
				return
			}
			closeAll()
			document.getElementById("gallery").style.display="flex"
			document.getElementById("ladybug").style.scale=1
			document.getElementById("ladybug-bg").style.display="flex"
		}
		async function importSave() {
			let getSave=prompt("Retrieve your memories...")
			if(getSave===null) return
			clearAllInterval()
			document.getElementById("end1").style["pointer-events"]="unset"
			for(let i=0;i<=10;i++) {
				document.getElementById("end1").style.opacity=i/10
				await delay(100)
			}
			location.reload()
		}
		async function exportSave() {
			document.getElementById("export-btn").innerHTML="Memories Stored!"
			await delay(1000)
			document.getElementById("export-btn").innerHTML="Store Memories"
		}
		async function hardReset() {
			let getResetSentence=prompt("Are you sure to reset the game and lost all process?\nType 'The game is perfect, there are no bugs' to confirm.")
			if(getResetSentence!=="The game is perfect, there are no bugs") return
			clearAllInterval()
			for(let i=0;i<=50;i++) {
				document.getElementById("end1").style.opacity=i/50
				await delay(100)
			}
			document.getElementById("end1").style["pointer-events"]="unset"
			localStorage.removeItem("player")
			localStorage.removeItem("explore")
			localStorage.removeItem("fight")
			userVersion=version
			localStorage.setItem("userVersion",JSON.stringify(userVersion))
			document.getElementById("end2").innerText="The story of the Florroom continues..."
			for(let i=0;i<=20;i++) {
				document.getElementById("end2").style.opacity=i/20
				await delay(100)
			}
			await delay(1000)
			for(let i=0;i<=20;i++) {
				document.getElementById("end2").style.opacity=1-i/20
				await delay(100)
			}
			document.getElementById("end2").innerText="Forever."
			for(let i=0;i<=20;i++) {
				document.getElementById("end2").style.opacity=i/20
				await delay(100)
			}
			await delay(2000)
			for(let i=0;i<=20;i++) {
				document.getElementById("end2").style.opacity=1-i/20
				await delay(100)
			}
			await delay(3000)
			location.reload()
		}
		function updateVersion(reset) {
			if(reset===false) {
				userVersion=version
				localStorage.setItem("userVersion",JSON.stringify(userVersion))
				location.reload()
			}
			if(reset===true) {
				hardReset()
			}
		}
		function updateGame() {
			console.log("updateGame")
		}
		function endTurn() {
			console.log("endTurn")
		}
		function tryInput(num) {
			console.log("tryInput")
		}
		document.addEventListener("keydown",function(pressed) {
			switch(pressed.key) {
				case "1":
				tryInput(1)
				break
			}
		} )
		let intervalFlower,intervalCalendar
		function clearAllInterval() {
			clearInterval(intervalFlower)
			clearInterval(intervalCalendar)
		}
		window.onload=async function() {
			document.getElementById("end1").style["pointer-events"]="unset"
			if(userVersion!==version) {
				for(let i=0;i<=10;i++) {
					document.getElementById("end1").style.opacity=1-i/10
					await delay(100)
				}
				document.getElementById("end1").style["pointer-events"]="none"
				return
			}
			document.getElementById("version1").style.display="none"
			document.getElementById("version2").style.display="none"
			setInterval(cogRotate,10)
			setInterval(flowerRotate,10)
			document.getElementById("ladybug").style.scale=1.2
			document.getElementById("ladybug").style.transform="rotate("+ladybugDegree+"deg)"
			document.getElementById("ladybug-bg").style.transform="translate(-"+ladybugX+"px, -"+ladybugY+"px)"
			setInterval(ladybugMove,10)
			for(let i=1;i<=3;i++) {
				for(let j=1;j<=8;j++) {
					document.getElementById("fight-container").appendChild(createGrid(0,j,i,"Empty",1))
				}
			}
			for(let i=1;i<=8;i++) {
				document.getElementById("fight-container").appendChild(createGrid(0,i,0,"Line",1))
			}
			for(let i=4;i<=6;i++) {
				for(let j=1;j<=8;j++) {
					document.getElementById("fight-container").appendChild(createGrid(0,j,i,"Empty",1))
				}
			}
			homeElement=document.getElementById("home-btn")
			homeFlowerElement=document.getElementById("flower-btn")
			setContainElement()
			intervalFlower=setInterval(updateFlowerSpot,10)
			createPath()
			document.querySelectorAll("button").forEach(btn => {
				btn.addEventListener("click",this.blur())
				btn.addEventListener("keydown",pressed => {
					if(pressed.key === "Enter") pressed.preventDefault()
				} )
			} )
			mapElement.querySelectorAll("path[d*='A2']").forEach(path => {
				path.addEventListener("mouseenter",() => mapInfo(path))
				path.addEventListener("mouseleave",closeInfo)
			} )
			if(fight.active===true) {
				document.getElementById("fight-container").style.display="grid"
				document.getElementById("fight-btn").style.top=parseFloat(window.getComputedStyle(document.getElementById("fight-container")).top)-300+"px"
				document.getElementById("fight-btn").style.display="flex"
			} else {
				document.getElementById("map-container").style.display="unset"
			}
			document.getElementById("end2").innerText="Welcome to the Florroom!"
			for(let i=0;i<=10;i++) {
				document.getElementById("end2").style.opacity=i/10
				await delay(100)
			}
			await delay(1000)
			for(let i=0;i<=10;i++) {
				document.getElementById("end2").style.opacity=1-i/10
				await delay(100)
			}
			for(let i=0;i<=10;i++) {
				document.getElementById("end1").style.opacity=1-i/10
				await delay(100)
			}
			document.getElementById("end1").style["pointer-events"]="none"
			player.calendar.start=Date.now()
			intervalCalendar=setInterval(updateCalendar,10)
		}
		function updateCalendar() {
			let timePassed=Date.now()-player.calendar.start
			if(timePassed<100) return
			player.calendar.second+=betterFloor(timePassed/100)
			player.calendar.start+=betterFloor(timePassed/100)*100
			let calendarFlag=true
			while(calendarFlag) {
				calendarFlag=false
				if(player.calendar.second>0 && player.calendar.minute<=79) {
					player.calendar.second--
					player.calendar.minute++
					calendarFlag=true
				}
				if(player.calendar.minute>79 && player.calendar.hour<79) {
					player.calendar.minute=1
					player.calendar.hour++
					calendarFlag=true
				}
				if(player.calendar.day<79 && player.calendar.hour===79 && player.calendar.minute===80) {
					player.calendar.second+=120
					calendarFlag=true
				}
				if(player.calendar.second>=120 && player.calendar.hour===79 && player.calendar.minute===80) {
					player.calendar.second-=120
					player.calendar.minute=1
					player.calendar.hour=1
					player.calendar.day++
					document.getElementById("end2").style.opacity=0
					document.getElementById("end1").style.opacity=0
					document.getElementById("end1").style["pointer-events"]="none"
					calendarFlag=true
				}
			}
			if(player.calendar.second>0) {
				document.getElementById("end1").style["pointer-events"]="unset"
				document.getElementById("end1").style.opacity=1
				document.getElementById("end2").innerText="Sleeping..."
				document.getElementById("end2").style.opacity=1
			}
			if(player.calendar.day<70) {
				document.getElementById("calendar-day").setAttribute("class","green")
			} else if(player.calendar.day<78) {
				document.getElementById("calendar-day").setAttribute("class","yellow")
			} else if(player.calendar.day<79) {
				document.getElementById("calendar-day").setAttribute("class","red")
			} else {
				document.getElementById("calendar-day").setAttribute("class","grey")
			}
			if(player.calendar.hour<=50) {
				document.getElementById("calendar-hour").setAttribute("class","green")
				document.getElementById("calendar-minute").setAttribute("class","green")
			} else if(player.calendar.hour<=70) {
				document.getElementById("calendar-hour").setAttribute("class","yellow")
				document.getElementById("calendar-minute").setAttribute("class","yellow")
			} else {
				document.getElementById("calendar-hour").setAttribute("class","red")
				document.getElementById("calendar-minute").setAttribute("class","red")
			}
			document.getElementById("calendar-day").innerHTML="Day "+player.calendar.day
			document.getElementById("calendar-hour").innerHTML=player.calendar.hour
			if(player.calendar.hour<10) document.getElementById("calendar-hour").innerHTML="0"+player.calendar.hour
			document.getElementById("calendar-minute").innerHTML=player.calendar.minute
			if(player.calendar.minute<10) document.getElementById("calendar-minute").innerHTML="0"+player.calendar.minute
			localStorage.setItem("player",JSON.stringify(player))
		}
		let drag=false,dragX=0,dragY=0,mapcX=0,mapcY=0,containElement,mapElement,mapInfoElement,homeElement,homeFlowerElement,scaleSize
		function setContainElement() {
			containElement=document.getElementById("map-container")
			mapElement=document.getElementById("map-trans")
			mapInfoElement=document.getElementById("mapinfo")
			containElement.addEventListener("mousedown",function(mouse) {
				if(mouse.target.id!=="blank") return
				drag=true
				dragX=mouse.clientX
				dragY=mouse.clientY
			} )
			document.addEventListener("mousemove",function(mouse) {
				if(drag!==true) return
				let newDragX=mouse.clientX,newDragY=mouse.clientY
				mapcX+=(newDragX-dragX)*100/scaleSize,dragX=newDragX
				mapcY+=(newDragY-dragY)*100/scaleSize,dragY=newDragY
				mapElement.style.transform="translate("+mapcX+"px, "+mapcY+"px)"
				updateHome()
			} )
			document.addEventListener("mouseup",function() {
				drag=false
			} )
		}
		function updateHome() {
			scaleSize=Math.min(parseFloat(window.getComputedStyle(containElement).height),parseFloat(window.getComputedStyle(containElement).width))
			let scaledX=mapcX/parseFloat(window.getComputedStyle(containElement).width)
			let scaledY=mapcY/parseFloat(window.getComputedStyle(containElement).height)
			let scaledX2=scaledX+(flowerSpotX-50)/parseFloat(window.getComputedStyle(containElement).width)
			let scaledY2=scaledY+(flowerSpotY-50)/parseFloat(window.getComputedStyle(containElement).height)
			let scaleDistance=Math.max(Math.abs(scaledX),Math.abs(scaledY))
			let scaleDistance2=Math.max(Math.abs(scaledX2),Math.abs(scaledY2))
			if(Math.abs(scaledX)*scaleSize<50 && Math.abs(scaledY)*scaleSize<50) {
				homeElement.style.display="none"
			} else {
				homeElement.style.left=50+scaledX/scaleDistance*40+"%"
				homeElement.style.top=50+scaledY/scaleDistance*40+"%"
				homeElement.style.display="unset"
			}
			if((Math.abs(scaledX2)*scaleSize<50 && Math.abs(scaledY2)*scaleSize<50) || (flowerSpotX===50 && flowerSpotY===50)) {
				homeFlowerElement.style.display="none"
			} else {
				homeFlowerElement.style.left=50+scaledX2/scaleDistance2*40+"%"
				homeFlowerElement.style.top=50+scaledY2/scaleDistance2*40+"%"
				homeFlowerElement.style.display="unset"
			}
		}
		function home(target) {
			if(target==="origin") {
				mapcX=0
				mapcY=0
				mapElement.style.transform=""
				updateHome()
			}
			if(target==="flower") {
				mapcX=50-flowerSpotX
				mapcY=50-flowerSpotY
				mapElement.style.transform="translate("+mapcX+"px, "+mapcY+"px)"
				updateHome()
			}
		}
		function getSpotCord(value) {
			let spotD=document.querySelector("path[value='"+value+"']").getAttribute("d")
			let spotCord=new Object()
			spotCord.x=parseInt(/(?<=M)\d+/.exec(spotD))
			if(isNaN(spotCord.x)) spotCord.x=-parseInt(/(?<=M-)\d+/.exec(spotD))
			spotCord.y=parseInt(/(?<=M-?\d+\s)\d+/.exec(spotD))+2
			if(isNaN(spotCord.y)) spotCord.y=-parseInt(/(?<=M-?\d+\s-)\d+/.exec(spotD))+2
			return spotCord
		}
		function distance(cord1,cord2) {
			if(typeof(cord1)==="string") cord1=parseInt(cord1)
			if(typeof(cord2)==="string") cord2=parseInt(cord2)
			if(cord1===cord2) return 0
			if(pathArray.indexOf(cord1*100+cord2)===-1 && pathArray.indexOf(cord2*100+cord1)===-1) return -1
			let dx=getSpotCord(cord2).x-getSpotCord(cord1).x,dy=getSpotCord(cord2).y-getSpotCord(cord1).y,dv=(dx*dx+dy*dy)**0.5+20
			if(cord1-cord1%10!==cord2-cord2%10) dv=dv*1.5+50
			return betterFloor(dv)
		}
		function createPath() {
			for(let i in pathArray) {
				let pathStart=betterFloor(pathArray[i]/100),pathEnd=pathArray[i]%100,newPath=document.createElementNS(svgNS,"path")
				newPath.setAttribute("value",pathArray[i])
				if(pathEnd-pathEnd%10!==pathStart-pathStart%10) {
					newPath.setAttribute("class","grey-path pointer narrow")
				} else if(pathStart<20) {
					newPath.setAttribute("class","lgreen-path pointer narrow")
				} else if(pathStart<30) {
					newPath.setAttribute("class","yellow-path pointer narrow")
				} else if(pathStart<40) {
					newPath.setAttribute("class","blue-path pointer narrow")
				} else if(pathStart<50) {
					newPath.setAttribute("class","dbrown-path pointer narrow")
				} else if(pathStart<60) {
					newPath.setAttribute("class","dbrown-path pointer narrow")
				} else {
					newPath.setAttribute("class","dgreen-path pointer narrow")
				}
				newPath.setAttribute("d","M"+getSpotCord(pathStart).x+" "+getSpotCord(pathStart).y+"L"+getSpotCord(pathEnd).x+" "+getSpotCord(pathEnd).y)
				mapElement.insertBefore(newPath,mapElement.children[i])
			}
			if(explore.highest<100) {
				let highestPlace=tutorialOrder.indexOf(explore.highest)
				mapElement.querySelectorAll("path[value]").forEach(path => {
					let pathValue=parseInt(path.getAttribute("value"))
					if(pathValue<100) {
						let pathOrder=tutorialOrder.indexOf(pathValue)
						if(pathOrder===-1 || pathOrder>highestPlace+1) path.style.display="none"
					} else {
						let pathOrder1=tutorialOrder.indexOf(pathValue%100)
						let pathOrder2=tutorialOrder.indexOf(betterFloor(pathValue/100))
						if(pathOrder1===-1 || pathOrder1>highestPlace+1 || pathOrder2===-1 || pathOrder2>highestPlace+1) path.style.display="none"
					}
				} )
			}
		}
		let flowerMove=false,flowerMoveStartTime=Date.now(),flowerStartSpot,flowerSpotX=0,flowerSpotY=0
		function travel(spot) {
			flowerStartSpot=explore.flowerspot
			explore.flowerspot=spot
			flowerMoveStartTime=Date.now()
			flowerMove=true
		}
		function updateFlowerSpot() {
			if(document.getElementById("flowerspot").style.transform==="") {
				flowerSpotX=getSpotCord(explore.flowerspot).x
				flowerSpotY=getSpotCord(explore.flowerspot).y
				document.getElementById("flowerspot").style.transform="translate("+(flowerSpotX-50)+"px, "+(flowerSpotY-50)+"px)"
				updateHome()
				return
			}
			if(flowerMove===false) return
			let distancePassed=(Date.now()-flowerMoveStartTime)/100/distance(flowerStartSpot,explore.flowerspot)
			if(distancePassed>=1) {
				flowerSpotX=getSpotCord(explore.flowerspot).x
				flowerSpotY=getSpotCord(explore.flowerspot).y
				document.getElementById("flowerspot").style.transform="translate("+(flowerSpotX-50)+"px, "+(flowerSpotY-50)+"px)"
				updateHome()
				flowerMove=false
				if(explore.explored[explore.flowerspot]===true) {
					explore.targetspot=explore.flowerspot
					localStorage.setItem("explore",JSON.stringify(explore))
				} else {
					startFight()
				}
				return
			}
			flowerSpotX=(1-distancePassed)*getSpotCord(flowerStartSpot).x+distancePassed*getSpotCord(explore.flowerspot).x
			flowerSpotY=(1-distancePassed)*getSpotCord(flowerStartSpot).y+distancePassed*getSpotCord(explore.flowerspot).y
			document.getElementById("flowerspot").style.transform="translate("+(flowerSpotX-50)+"px, "+(flowerSpotY-50)+"px)"
			updateHome()
		}
		function chooseMap(spot) {
			if(flowerMove) return
			let spotValue=parseInt(spot.getAttribute("value"))
			if(distance(explore.flowerspot,spotValue)===-1) return
			if(spotValue===explore.flowerspot) {
				return
			}
			if(explore.explored[spotValue]===false) {
				explore.targetspot=spotValue
				localStorage.setItem("explore",JSON.stringify(explore))
			}
			travel(spotValue)
			closeInfo()
		}
		function mapInfo(spot) {
			if(flowerMove) return
			let spotValue=parseInt(spot.getAttribute("value"))
			if(distance(explore.flowerspot,spotValue)===-1) return
			document.getElementById("mapinfo").style.setProperty("--transform2","translate("+(mapcX+getSpotCord(spotValue).x-50)/100*scaleSize+"px, "+((mapcY+getSpotCord(spotValue).y-50)/100*scaleSize-50)+"px)")
			document.getElementById("mapinfo").innerHTML="<span>value="+spotValue+"</span>"
			if(distance(explore.flowerspot,spotValue)>0) {
				document.getElementById("mapinfo").innerHTML+="<span>distance="+distance(explore.flowerspot,spotValue)+"</span>"
			}
			document.getElementById("mapinfo").style.display="flex"
		}
		function closeInfo() {
			document.getElementById("mapinfo").style.display="none"
		}
		function startFight() {
			fight.active=true
			localStorage.setItem("fight",JSON.stringify(fight))
			document.getElementById("map-container").style.display="none"
			document.getElementById("fight-container").style.display="grid"
			document.getElementById("fight-btn").style.top=parseFloat(window.getComputedStyle(document.getElementById("fight-container")).top)-300+"px"
			document.getElementById("fight-btn").style.display="flex"
		}
		function endFight() {
			fight.active=false
			localStorage.setItem("fight",JSON.stringify(fight))
			explore.explored[explore.flowerspot]=true
			if(explore.highest<100) {
				explore.highest=explore.flowerspot
				let highestPlace=tutorialOrder.indexOf(explore.highest)
				mapElement.querySelectorAll("path[value]").forEach(path => {
					let pathValue=parseInt(path.getAttribute("value"))
					if(pathValue<100) {
						let pathOrder=tutorialOrder.indexOf(pathValue)
						if(pathOrder!==-1 && pathOrder<=highestPlace+1) path.style.display="unset"
					} else {
						let pathOrder1=tutorialOrder.indexOf(pathValue%100)
						let pathOrder2=tutorialOrder.indexOf(betterFloor(pathValue/100))
						if(pathOrder1!==-1 && pathOrder1<=highestPlace+1 && pathOrder2!==-1 && pathOrder2<=highestPlace+1) path.style.display="unset"
					}
				} )
			}
			localStorage.setItem("explore",JSON.stringify(explore))
			document.getElementById("fight-btn").style.display="none"
			document.getElementById("fight-container").style.display="none"
			document.getElementById("map-container").style.display="unset"
		}
	</script>
	<script>
		let perfectGame="The game is perfect, there are no bugs"
		console.log(perfectGame)
	</script>
</head>
<body>
	<div class="tl">
		<button type="button" onclick="settings()" class="circbtn" title="Settings">
			<svg id="cog" viewBox="0 0 100 100" class="in-svg">
				<path d="M50 2A48 48 0 0 0 50 98A48 48 0 0 0 50 2"/>
				<path class="fblack-path" d="M50 30A20 20 0 0 0 50 70L50 60A10 10 0 0 1 50 40L50 30A20 20 0 0 1 50 70L50 60A10 10 0 0 0 50 40Z"/>
				<path class="fblack-path" d="M45 22L55 22L55 35L45 35ZM78 45L78 55L65 55L65 45ZM55 78L45 78L45 65L55 65ZM22 55L22 45L35 45L35 55Z"/>
				<path class="diag fblack-path" d="M45 22L55 22L55 35L45 35ZM78 45L78 55L65 55L65 45ZM55 78L45 78L45 65L55 65ZM22 55L22 45L35 45L35 55Z"/>
			</svg>
		</button>
	</div>
	<div class="tr">
		<button type="button" onclick="howToPlay()" class="circbtn" title="How to play">
			<svg viewBox="0 0 100 100" class="in-svg">
				<path id="helpsvg" d="M50 2A48 48 0 0 0 50 98A48 48 0 0 0 50 2M35 35A15 15 0 1 1 59 47A22.5 22.5 0 0 0 50 65"/>
				<path class="fblack-path" d="M50 75A4 4 0 0 0 50 83A4 4 0 0 0 50 75"/>
			</svg>
		</button>
	</div>
	<div class="bl">
		<button type="button" onclick="openInventory()" class="circbtn" title="Inventory">
			<svg viewBox="0 0 100 100" class="in-svg">
				<path d="M50 2A48 48 0 0 0 50 98A48 48 0 0 0 50 2"/>
				<path class="wide" d="M50 35A15 15 0 0 0 50 65A15 15 0 0 0 50 35"/>
				<g id="flower">
					<path class="fgreen-path" d="M41.5 36.8A10 13 0 1 1 58.5 36.8A15.7 15.7 0 0 0 41.5 36.8"/>
					<path class="rot72 fblue-path" d="M41.5 36.8A10 13 0 1 1 58.5 36.8A15.7 15.7 0 0 0 41.5 36.8"/>
					<path class="rot144 fred-path" d="M41.5 36.8A10 13 0 1 1 58.5 36.8A15.7 15.7 0 0 0 41.5 36.8"/>
					<path class="rot216 fcyan-path" d="M41.5 36.8A10 13 0 1 1 58.5 36.8A15.7 15.7 0 0 0 41.5 36.8"/>
					<path class="rot288 fpurple-path" d="M41.5 36.8A10 13 0 1 1 58.5 36.8A15.7 15.7 0 0 0 41.5 36.8"/>
				</g>
			</svg>
		</button>
	</div>
	<div class="br">
		<button type="button" onclick="openGallery()" class="circbtn" title="Gallery">
			<svg viewBox="0 0 100 100" class="in-svg">
				<g id="ladybug-bg" class="nd">
					<path class="flgreen-path ns" d="M0 0L50 0L50 50L0 50ZM100 0L150 0L150 50L100 50ZM0 100L50 100L50 150L0 150ZM100 100L150 100L150 150L100 150Z"/>
					<path class="flred-path ns" d="M50 0L100 0L100 50L50 50ZM150 0L200 0L200 50L150 50ZM50 100L100 100L100 150L50 150ZM150 100L200 100L200 150L150 150Z"/>
					<path class="flblue-path ns" d="M0 50L50 50L50 100L0 100ZM100 50L150 50L150 100L100 100ZM0 150L50 150L50 200L0 200ZM100 150L150 150L150 200L100 200Z"/>
					<path class="fpurple-path ns" d="M50 50L100 50L100 100L50 100ZM150 50L200 50L200 100L150 100ZM50 150L100 150L100 200L50 200ZM150 150L200 150L200 200L150 200Z"/>
				</g>
				<path d="M50 2A48 48 0 0 0 50 98A48 48 0 0 0 50 2"/>
				<g id="ladybug">
					<path class="fred-path wide" d="M62 34A20 20 0 1 1 38 34A12 5 0 0 0 62 34"/>
					<path class="fblack-path" d="M38 34A12 5 0 0 1 62 34A12 5 0 0 1 38 34"/>
					<path class="fblack-path" d="M45 47A3 3 0 0 0 45 53A3 3 0 0 0 45 47"/>
					<path class="fblack-path" d="M48 62A3 3 0 0 0 48 68A3 3 0 0 0 48 62"/>
					<path class="fblack-path" d="M62 51A3 3 0 0 0 62 57A3 3 0 0 0 62 51"/>
				</g>
			</svg>
		</button>
	</div>
	<div id="settings" class="mid grey-bg box highz hsize nd">
		<h2>Settings</h2>
		<span class="nowrap">ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²</span>
		<br>
	</div>
	<div id="help" class="mid llpurple-bg box highz hsize nd">
		<h2>Flower Survival Guide</h2>
		<span class="nowrap">ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²</span>
		<br>
		<span>æ¬¢è¿æ¥å°è±å®¤ï¼è¿æ¯ä¸ä¸ªä¸å¤©æ"ä¸åä¹çå¹³æ¹"åéçä¸ç</span>
		<span>å¨è¿éï¼ä¸å¤©ç±79ä¸ªå°æ¶ææï¼èä¸å°æ¶ç±79ä¸ªåéææ</span>
		<span>å¦æä½ æç¥å°äºä¸å­å¨çæ¶é´ï¼ä¸è¦ææï¼<span class="bold">ç¡ä¸è§</span>å°±è½å®å¨æ¸¡è¿</span>
		<br>
		<span class="nowrap">ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²</span>
		<br>
		<span>å­ä¸å­ä¸ç­äºä¸åä¹çå¹³æ¹</span>
		<br>
		<span>QQ: 807581283</span>
		<br>
	</div>
	<div id="inventory" class="mid lblue-bg box highz hsize nd">
		<h2>Inventory</h2>
		<span class="nowrap">ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²</span>
		<br>
	</div>
	<div id="gallery" class="mid lyellow-bg box highz hsize nd">
		<h2>Gallery</h2>
		<span class="nowrap">ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²ð²</span>
		<br>
	</div>
	<div class="cmargin text3-c">
		<button type="button" onclick="importSave()" class="lmargin lblue-bg recbtn pointer" title="Import Save">Retrieve Memories</button>
		<button type="button" onclick="hardReset()" class="lmargin lred-bg recbtn forbidden" title="HARD RESET">Restart the Universe</button>
		<button type="button" id="export-btn" onclick="exportSave()" class="lmargin lyellow-bg recbtn pointer" title="Export Save">Store Memories</button>
	</div>
	<div id="calendar" class="cmargin text2-c">
		<span id="calendar-day">Day ##</span>
		<span class="lmargin">,</span>
		<span id="calendar-hour">()</span>
		<span class="llmargin">:</span>
		<span id="calendar-minute">()</span>
	</div>
	<div id="fight-btn" class="mid text3-c nd">
		<button type="button" id="move" onclick="fightMove()" class="lmargin dbrown-bg recbtn pointer nd">[M] Move</button>
		<button type="button" id="attack" onclick="fightAttack()" class="lmargin dblue-bg recbtn pointer nd">[Enter] Attack</button>
		<button type="button" id="defend" onclick="fightDefend()" class="lmargin dgreen-bg recbtn pointer nd">[Enter] Defend</button>
		<button type="button" id="skill" onclick="fightSkill()" class="lmargin purple-bg recbtn pointer nd">[X] Special Skill</button>
		<button type="button" id="endturn" onclick="endTurn()" class="lmargin grey-bg recbtn pointer">[P] End Turn</button>
	</div>
	<div id="fight-container" class="mid square48 nd">
	</div>
	<div id="map-container" class="mid lhsize border nd">
		<svg id="blank" viewBox="0 0 100 100" class="in-svg drag">
			<g id="map-trans">
				<path onclick="chooseMap(this)" value="10" class="fgrey-path pointer ns" d="M50 48A2 2 0 0 0 50 52A2 2 0 0 0 50 48"/>
				<path onclick="chooseMap(this)" value="11" class="flgreen-path pointer ns" d="M57 71A2 2 0 0 0 57 75A2 2 0 0 0 57 71"/>
				<path onclick="chooseMap(this)" value="12" class="flgreen-path pointer ns" d="M12 68A2 2 0 0 0 12 72A2 2 0 0 0 12 68"/>
				<path onclick="chooseMap(this)" value="13" class="flgreen-path pointer ns" d="M10 31A2 2 0 0 0 10 35A2 2 0 0 0 10 31"/>
				<path onclick="chooseMap(this)" value="14" class="flgreen-path pointer ns" d="M-34 37A2 2 0 0 0 -34 41A2 2 0 0 0 -34 37"/>
				<path onclick="chooseMap(this)" value="15" class="flgreen-path pointer ns" d="M16 -13A2 2 0 0 0 16 -9A2 2 0 0 0 16 -13"/>
				<path onclick="chooseMap(this)" value="16" class="flgreen-path pointer ns" d="M-36 -22A2 2 0 0 0 -36 -18A2 2 0 0 0 -36 -22"/>
				<path onclick="chooseMap(this)" value="17" class="flgreen-path pointer ns" d="M0 -67A2 2 0 0 0 0 -63A2 2 0 0 0 0 -67"/>
				<path onclick="chooseMap(this)" value="21" class="fyellow-path pointer ns" d="M52 104A2 2 0 0 0 52 108A2 2 0 0 0 52 104"/>
				<path onclick="chooseMap(this)" value="22" class="fyellow-path pointer ns" d="M10 117A2 2 0 0 0 10 121A2 2 0 0 0 10 117"/>
				<path onclick="chooseMap(this)" value="23" class="fyellow-path pointer ns" d="M-33 154A2 2 0 0 0 -33 158A2 2 0 0 0 -33 154"/>
				<path onclick="chooseMap(this)" value="24" class="fyellow-path pointer ns" d="M0 149A2 2 0 0 0 0 153A2 2 0 0 0 0 149"/>
				<path onclick="chooseMap(this)" value="25" class="fyellow-path pointer ns" d="M-32 128A2 2 0 0 0 -32 132A2 2 0 0 0 -32 128"/>
				<path onclick="chooseMap(this)" value="26" class="fyellow-path pointer ns" d="M-26 96A2 2 0 0 0 -26 100A2 2 0 0 0 -26 96"/>
				<path onclick="chooseMap(this)" value="31" class="fblue-path pointer ns" d="M100 4A2 2 0 0 0 100 8A2 2 0 0 0 100 4"/>
				<path onclick="chooseMap(this)" value="32" class="fblue-path pointer ns" d="M115 -28A2 2 0 0 0 115 -24A2 2 0 0 0 115 -28"/>
				<path onclick="chooseMap(this)" value="33" class="fblue-path pointer ns" d="M135 12A2 2 0 0 0 135 16A2 2 0 0 0 135 12"/>
				<path onclick="chooseMap(this)" value="34" class="fblue-path pointer ns" d="M182 9A2 2 0 0 0 182 13A2 2 0 0 0 182 9"/>
				<path onclick="chooseMap(this)" value="35" class="fblue-path pointer ns" d="M138 44A2 2 0 0 0 138 48A2 2 0 0 0 138 44"/>
				<path onclick="chooseMap(this)" value="36" class="fblue-path pointer ns" d="M160 -34A2 2 0 0 0 160 -30A2 2 0 0 0 160 -34"/>
				<path onclick="chooseMap(this)" value="37" class="fblue-path pointer ns" d="M151 71A2 2 0 0 0 151 75A2 2 0 0 0 151 71"/>
				<path onclick="chooseMap(this)" value="38" class="fblue-path pointer ns" d="M178 42A2 2 0 0 0 178 46A2 2 0 0 0 178 42"/>
				<path onclick="chooseMap(this)" value="39" class="fblue-path pointer ns" d="M108 -74A2 2 0 0 0 108 -70A2 2 0 0 0 108 -74"/>
				<path onclick="chooseMap(this)" value="41" class="fdbrown-path pointer ns" d="M31 5A2 2 0 0 0 31 9A2 2 0 0 0 31 5"/>
				<path onclick="chooseMap(this)" value="42" class="fdbrown-path pointer ns" d="M40 -17A2 2 0 0 0 40 -13A2 2 0 0 0 40 -17"/>
				<path onclick="chooseMap(this)" value="43" class="fdbrown-path pointer ns" d="M82 -18A2 2 0 0 0 82 -14A2 2 0 0 0 82 -18"/>
				<path onclick="chooseMap(this)" value="44" class="fdbrown-path pointer ns" d="M63 -50A2 2 0 0 0 63 -46A2 2 0 0 0 63 -50"/>
				<path onclick="chooseMap(this)" value="51" class="fdbrown-path pointer ns" d="M-56 51A2 2 0 0 0 -56 55A2 2 0 0 0 -56 51"/>
				<path onclick="chooseMap(this)" value="52" class="fdbrown-path pointer ns" d="M-32 69A2 2 0 0 0 -32 73A2 2 0 0 0 -32 69"/>
				<path onclick="chooseMap(this)" value="53" class="fdbrown-path pointer ns" d="M-59 169A2 2 0 0 0 -59 173A2 2 0 0 0 -59 169"/>
				<path onclick="chooseMap(this)" value="54" class="fdbrown-path pointer ns" d="M-19 184A2 2 0 0 0 -19 188A2 2 0 0 0 -19 184"/>
				<path onclick="chooseMap(this)" value="55" class="fdbrown-path pointer ns" d="M90 156A2 2 0 0 0 90 160A2 2 0 0 0 90 156"/>
				<path onclick="chooseMap(this)" value="56" class="fdbrown-path pointer ns" d="M144 141A2 2 0 0 0 144 145A2 2 0 0 0 144 141"/>
				<path onclick="chooseMap(this)" value="61" class="fdgreen-path pointer ns" d="M103 91A2 2 0 0 0 103 95A2 2 0 0 0 103 91"/>
				<path onclick="chooseMap(this)" value="62" class="fdgreen-path pointer ns" d="M106 128A2 2 0 0 0 106 132A2 2 0 0 0 106 128"/>
				<path onclick="chooseMap(this)" value="63" class="fdgreen-path pointer ns" d="M141 121A2 2 0 0 0 141 125A2 2 0 0 0 141 121"/>
				<path onclick="chooseMap(this)" value="64" class="fdgreen-path pointer ns" d="M166 122A2 2 0 0 0 166 126A2 2 0 0 0 166 122"/>
				<path onclick="chooseMap(this)" value="65" class="fdgreen-path pointer ns" d="M121 154A2 2 0 0 0 121 158A2 2 0 0 0 121 154"/>
				<path onclick="chooseMap(this)" value="66" class="fdgreen-path pointer ns" d="M157 156A2 2 0 0 0 157 160A2 2 0 0 0 157 156"/>
				<path onclick="chooseMap(this)" value="67" class="fdgreen-path pointer ns" d="M159 179A2 2 0 0 0 159 183A2 2 0 0 0 159 179"/>
				<path id="flowerspot" class="fyellow-path pointer narrowp npe" d="M50 48.5A1.5 1.5 0 0 0 50 51.5A1.5 1.5 0 0 0 50 48.5M49.2 50.4A1 1 0 0 0 50.8 50.4M49.5 49.2L49.5 50M50.5 49.2L50.5 50"/>
			</g>
		</svg>
		<button type="button" id="home-btn" onclick="home('origin')" class="mid circbtn nd" title="Home">
			<svg viewBox="0 0 100 100" class="in-svg">
				<path d="M50 2A48 48 0 0 0 50 98A48 48 0 0 0 50 2"/>
				<path class="fyellow-path" d="M20 45L50 20L80 45Z"/>
				<path class="fdbrown-path" d="M30 45L30 75L70 75L70 45Z"/>
				<path class="fdgreen-path" d="M52 75L52 55L64 55L64 75Z"/>
			</svg>
		</button>
		<button type="button" id="flower-btn" onclick="home('flower')" class="mid circbtn nd" title="Flower">
			<svg viewBox="0 0 100 100" class="in-svg">
				<path d="M50 2A48 48 0 0 0 50 98A48 48 0 0 0 50 2"/>
				<path class="fyellow-path" d="M50 20A30 30 0 0 0 50 80A30 30 0 0 0 50 20M34 58A20 20 0 0 0 66 58M40 34L40 50M60 34L60 50"/>
			</svg>
		</button>
		<div id="mapinfo" class="llcyan-bg mid infobox nd">
			<span class="text2 bold">Centralia (C0)</span>
			<span class="bold">The beginning of the journey.</span>
			<br>
			<span>Mob: Ladybug 6361%, Baby Ant 79%</span>
		</div>
	</div>
	<div id="flower-state" class="bottom text3-c">
	</div>
	<div id="version1"></div>
	<div id="version2">
		<h2>Announcement</h2>
		<span>This game was updated again when you left!</span>
		<span>Do you want to perform a <span class="bold">hard reset</span> before starting the game?</span>
		<br>
		<span>The last update was on 2025/8/12,</span>
		<span>which updated petal image (check console for information).</span>
		<br>
		<button type="button" id="version3" onclick="updateVersion(false)">No, just update the version.</button>
		<br>
		<button type="button" id="version4" onclick="updateVersion(true)">Yes, hard reset before starting.</button>
	</div>
	<div id="end1"></div>
	<div id="end2"></div>
</body>
</html>
